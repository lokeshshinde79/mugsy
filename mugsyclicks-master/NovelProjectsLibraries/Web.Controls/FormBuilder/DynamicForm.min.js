$(function(){$(".SaveSubmission").click(function(){if(Page_ClientValidate("DynamicForm")){$.ajax({type:"POST",url:"NovelProjects.Web.FormBuilder.FormBuilderService.asmx/SaveSubmission",data:a(),dataType:"json",contentType:"application/json; charset=utf-8",success:function(b){$(".DynamicForm").hide();$("#ThankYou").show()},error:function(c,b){alert("fail: "+b+"\n "+c.responseText)}})}});$(".ResetForm").click(function(){location.href=location.href});function a(){var b="{ Form: {";b+=' FormID:"'+$('span[@ID="FormID"]').text()+'", Answers: [ ';$(".DynamicForm :input").each(function(){var c=$(this).attr("type");var d=$(this).attr("id");var e=$('input[@name="'+$(this).attr("name")+'"]');switch(c){case"select-one":case"textarea":case"text":b+='{ QuestionID:"'+d+'",Value:"'+$(this).val()+'" },';break;case"radio":if(b.indexOf($(this).attr("name"))==-1){b+='{ QuestionID:"'+$(this).attr("name")+'",Value:"'+e.filter(":checked").val()+'" },'}break;case"checkbox":if($(this).attr("name").indexOf("$")>-1){if(e.attr("checked")){b+='{ QuestionID:"'+$(this).attr("name").replace(/\$.*/,"")+'",Value:"'+$(this).next().text()+'" },'}else{b+='{ QuestionID:"'+$(this).attr("name").replace(/\$.*/,"")+'",Value:"" },'}}else{b+='{ QuestionID:"'+$(this).attr("name")+'",Value:"'+$(this).attr("checked")+'" },'}break}});b=b.substring(0,b.length-1);b+="] } }";return b}});